<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ç»˜å›¾ç»ˆææç¤ºè¯ç™¾ç§‘ V2.1 (ä¿®å¤ç‰ˆ)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* V2.1 æ ·å¼ä¿®å¤æ ¸å¿ƒï¼š
           1. scroll-padding-top: è§£å†³ç‚¹å‡»é”šç‚¹æˆ–æ»šåŠ¨æ—¶ï¼Œæ ‡é¢˜è¢«é¡¶éƒ¨ sticky å…ƒç´ é®æŒ¡çš„é—®é¢˜ã€‚
           2. ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼šéšè—ä¾§è¾¹æ ï¼Œæ”¹ä¸ºé¡¶éƒ¨æ¨ªå‘æ»šåŠ¨æ¡ã€‚
        */
        html {
            scroll-behavior: smooth;
            scroll-padding-top: 180px; /* å…³é”®ï¼šé¢„ç•™é¡¶éƒ¨ç©ºé—´ï¼Œé˜²æ­¢æ ‡é¢˜è¢«é®æŒ¡ */
        }

        body {
            background-color: #FDFBF7;
            color: #333;
        }

        /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™åŠŸèƒ½ */
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* è¯æ±‡å¡ç‰‡äº¤äº’ */
        .keyword-chip {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid #E5E7EB;
        }
        .keyword-chip:hover {
            transform: translateY(-2px);
            border-color: #Cfb898;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .keyword-chip:active {
            transform: scale(0.98);
        }

        /* é€‰ä¸­çŠ¶æ€é«˜äº® */
        .nav-btn-active {
            background-color: #8B7355 !important;
            color: white !important;
            box-shadow: 0 4px 6px rgba(139, 115, 85, 0.3);
        }

        /* Chart å®¹å™¨ */
        .chart-container {
            position: relative;
            height: 160px;
            width: 100%;
        }
    </style>
    <!-- Chosen Palette: Warm Neutrals & Almond -->
    <!-- Application Structure Plan:
         1. Header: Static branding.
         2. Builder Bar: Sticky (Top: 0). High Z-Index. Solid background to prevent bleed-through.
         3. Mobile Nav: Sticky (Top: BuilderHeight). Horizontal scroll.
         4. Layout: Grid system. Left Sidebar (Desktop only, Sticky under headers). Right Content.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="font-sans antialiased">

    <!-- 1. å“ç‰Œå¤´éƒ¨ (Static) -->
    <header class="bg-white border-b border-gray-200 py-4">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-[#8B7355] rounded-lg flex items-center justify-center text-white text-lg shadow-sm">ğŸ¨</div>
                <div>
                    <h1 class="text-lg font-bold text-gray-900 tracking-tight leading-none">Prompt Encyclopedia <span class="text-[#Cfb898] font-normal">V2.1</span></h1>
                    <p class="text-xs text-gray-500 mt-0.5">æ— é®æŒ¡ä¿®å¤ç‰ˆ / Layout Fixed</p>
                </div>
            </div>
            <div class="text-xs text-gray-400 font-mono hidden sm:block">Total: <span id="total-count">300+</span> Tokens</div>
        </div>
    </header>

    <!-- 2. æç¤ºè¯æ„å»ºå™¨ (Sticky Top) - æ ¸å¿ƒä¿®å¤ï¼šçº¯è‰²èƒŒæ™¯ï¼Œé«˜å±‚çº§ -->
    <div id="builder-bar" class="sticky top-0 z-50 bg-[#FDFBF7]/95 backdrop-blur-sm border-b border-[#E5E0D8] shadow-sm transition-all duration-300">
        <div class="container mx-auto px-4 py-3">
            <div class="flex flex-col sm:flex-row gap-3 items-center">
                <!-- è¾“å…¥æ˜¾ç¤ºåŒº -->
                <div class="relative w-full group">
                    <div id="prompt-display" class="w-full min-h-[50px] max-h-[120px] overflow-y-auto py-2.5 px-3 bg-white rounded-lg border border-gray-300 text-gray-700 font-mono text-sm leading-6 break-words shadow-inner focus-within:ring-2 focus-within:ring-[#Cfb898] transition">
                        <span class="text-gray-400 italic select-none flex items-center h-full">ğŸ‘‡ ç‚¹å‡»ä¸‹æ–¹è¯æ±‡ï¼Œæ­¤å¤„è‡ªåŠ¨ç»„è£…å’’è¯­...</span>
                    </div>
                    <div class="absolute right-2 top-2 hidden group-hover:block text-[10px] text-gray-300 uppercase font-bold tracking-widest pointer-events-none">Builder</div>
                </div>
                
                <!-- æ“ä½œæŒ‰é’® -->
                <div class="flex gap-2 w-full sm:w-auto shrink-0">
                    <button onclick="clearPrompts()" class="flex-1 sm:flex-none px-4 py-2 rounded-lg text-sm text-gray-600 hover:text-red-600 hover:bg-red-50 border border-transparent transition font-medium">
                        æ¸…ç©º
                    </button>
                    <button onclick="copyPrompts()" class="flex-1 sm:flex-none px-5 py-2 rounded-lg text-sm font-bold text-white bg-gray-900 hover:bg-black shadow-lg hover:-translate-y-0.5 transition flex items-center justify-center gap-2">
                        <span>ğŸ“‹ å¤åˆ¶</span>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- 3. ç§»åŠ¨ç«¯å¯¼èˆª (Mobile Only, Sticky below Builder) -->
        <div class="lg:hidden border-t border-gray-200 bg-white overflow-x-auto hide-scrollbar">
            <div class="flex px-4 py-2 gap-2 min-w-max" id="mobile-nav-container">
                <!-- JS Injected Buttons -->
            </div>
        </div>
    </div>

    <!-- 4. ä¸»ä½“å†…å®¹å¸ƒå±€ -->
    <main class="container mx-auto px-4 py-8 max-w-7xl">
        <div class="flex flex-col lg:flex-row gap-8 relative">
            
            <!-- å·¦ä¾§æ¡Œé¢ç«¯å¯¼èˆª (Desktop Sidebar) - ä¿®å¤ï¼šsticky å®šä½ -->
            <aside class="hidden lg:block w-64 shrink-0 relative">
                <div class="sticky top-[140px] space-y-6"> <!-- topå€¼é¿å¼€æ„å»ºæ  -->
                    
                    <!-- å¯¼èˆªèœå• -->
                    <nav class="space-y-1 bg-white rounded-xl shadow-sm border border-gray-100 p-2" id="desktop-nav-container">
                        <!-- JS Injected Items -->
                    </nav>

                    <!-- å°å›¾è¡¨ -->
                    <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm">
                        <h4 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 text-center">Prompt ç»“æ„å»ºè®®</h4>
                        <div class="chart-container">
                            <canvas id="miniChart"></canvas>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- å³ä¾§è¯æ±‡å†…å®¹åŒº -->
            <div class="flex-1 min-w-0" id="content-area">
                <!-- è¿™é‡Œçš„ min-w-0 æ˜¯é˜²æ­¢ grid åœ¨ flex item ä¸­æº¢å‡ºçš„å…³é”® -->
                
                <!-- åŠ¨æ€å¤´éƒ¨ä¿¡æ¯ -->
                <div class="bg-white p-6 rounded-2xl border border-[#E5E0D8] shadow-sm mb-8">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                        <div>
                            <div class="flex items-center gap-3 mb-1">
                                <span id="active-cat-icon" class="text-3xl">ğŸ’</span>
                                <h2 id="active-cat-title" class="text-2xl font-bold text-gray-800">ç”»è´¨ä¸æ¸…æ™°åº¦</h2>
                            </div>
                            <p id="active-cat-desc" class="text-gray-600 text-sm">è¿™äº›è¯æ±‡å†³å®šäº†ç”»é¢çš„åˆ†è¾¨ç‡ã€ç»†èŠ‚ä¸°å¯Œåº¦å’Œæ•´ä½“ä¿çœŸåº¦ã€‚</p>
                        </div>
                        <div class="bg-[#F9F7F2] px-4 py-3 rounded-lg border border-[#EAE5D9] max-w-xs w-full md:w-auto">
                            <div class="flex items-center gap-2 mb-1">
                                <span class="w-1.5 h-1.5 rounded-full bg-[#Cfb898]"></span>
                                <span class="text-[#8B7355] text-xs font-bold uppercase">ä¸“å®¶å»ºè®® / Tip</span>
                            </div>
                            <p id="active-cat-tip" class="text-xs text-gray-600 leading-relaxed">å»ºè®®å§‹ç»ˆå°† Masterpiece æ”¾åœ¨å¼€å¤´ã€‚</p>
                        </div>
                    </div>
                </div>

                <!-- è¯æ±‡ç½‘æ ¼å®¹å™¨ -->
                <div id="keywords-container" class="space-y-10">
                    <!-- JS å°†åœ¨è¿™é‡Œæ¸²æŸ“å­åˆ†ç±»å’Œè¯æ±‡ -->
                </div>

                <!-- åº•éƒ¨ç•™ç™½ï¼Œæ–¹ä¾¿æ»šåŠ¨ -->
                <div class="h-20"></div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 py-8 text-center">
        <p class="text-gray-400 text-sm">Â© 2024 AI Prompt Encyclopedia V2.1 | Optimized for readability</p>
    </footer>

    <!-- Logic -->
    <script>
        // --- å®Œæ•´è¯åº“æ•°æ® ---
        const promptData = {
            quality: {
                icon: "ğŸ’",
                title: "ç”»è´¨ (Quality)",
                desc: "ç”Ÿå›¾çš„åŸºçŸ³ã€‚æ— è®ºä»€ä¹ˆé£æ ¼ï¼Œè¿™äº›è¯éƒ½èƒ½æå‡ç”»é¢ç²¾ç»†åº¦ã€‚",
                tip: "SDXLç”¨æˆ·å¯ä»¥å°è¯• 'Score_9, Score_8_up'ï¼›MJç”¨æˆ·è¯·ä½¿ç”¨ '--q 2'ã€‚",
                keywords: [
                    { sub: "æ ¸å¿ƒè´¨é‡ (Core)", en: "Masterpiece", cn: "æ°ä½œ(å¿…é€‰)" },
                    { sub: "æ ¸å¿ƒè´¨é‡ (Core)", en: "Best quality", cn: "æœ€ä½³è´¨é‡" },
                    { sub: "æ ¸å¿ƒè´¨é‡ (Core)", en: "High quality", cn: "é«˜è´¨é‡" },
                    { sub: "æ ¸å¿ƒè´¨é‡ (Core)", en: "Authentic", cn: "çœŸå®çš„" },
                    { sub: "åˆ†è¾¨ç‡ (Res)", en: "8k resolution", cn: "8Kè¶…æ¸…" },
                    { sub: "åˆ†è¾¨ç‡ (Res)", en: "UHD", cn: "è¶…é«˜æ¸…" },
                    { sub: "åˆ†è¾¨ç‡ (Res)", en: "RAW photo", cn: "RAWåŸç‰‡" },
                    { sub: "ç»†èŠ‚ (Detail)", en: "Hyper-detailed", cn: "è¶…ç»†èŠ‚" },
                    { sub: "ç»†èŠ‚ (Detail)", en: "Intricate details", cn: "é”™ç»¼ç»†èŠ‚" },
                    { sub: "ç»†èŠ‚ (Detail)", en: "Sharp focus", cn: "æ¸…æ™°èšç„¦" },
                    { sub: "æ¸²æŸ“ (Render)", en: "Unreal Engine 5", cn: "è™šå¹»5å¼•æ“" },
                    { sub: "æ¸²æŸ“ (Render)", en: "Octane render", cn: "Octaneæ¸²æŸ“" },
                    { sub: "æ¸²æŸ“ (Render)", en: "Ray tracing", cn: "å…‰çº¿è¿½è¸ª" }
                ]
            },
            lighting: {
                icon: "ğŸ’¡",
                title: "å…‰å½± (Lighting)",
                desc: "å…‰æ˜¯ç”»é¢çš„çµé­‚ã€‚å°è¯•æ··åˆå†·æš–è‰²è°ƒã€‚",
                tip: "â€˜Volumetric lightingâ€™ (ä½“ç§¯å…‰) æ˜¯è¥é€ å²è¯—æ„Ÿçš„æ·å¾„ã€‚",
                keywords: [
                    { sub: "è‡ªç„¶å…‰ (Natural)", en: "Natural lighting", cn: "è‡ªç„¶å…‰" },
                    { sub: "è‡ªç„¶å…‰ (Natural)", en: "Sunlight", cn: "æ—¥å…‰" },
                    { sub: "è‡ªç„¶å…‰ (Natural)", en: "Golden hour", cn: "é»„é‡‘æ—¶åˆ»" },
                    { sub: "è‡ªç„¶å…‰ (Natural)", en: "Blue hour", cn: "è“è°ƒæ—¶åˆ»" },
                    { sub: "è‰ºæœ¯å…‰ (Artistic)", en: "Cinematic lighting", cn: "ç”µå½±å¸ƒå…‰" },
                    { sub: "è‰ºæœ¯å…‰ (Artistic)", en: "Volumetric lighting", cn: "ä½“ç§¯å…‰/ä¸è¾¾å°”" },
                    { sub: "è‰ºæœ¯å…‰ (Artistic)", en: "Rembrandt lighting", cn: "ä¼¦å‹ƒæœ—å…‰" },
                    { sub: "è‰ºæœ¯å…‰ (Artistic)", en: "Rim lighting", cn: "è½®å»“å…‰" },
                    { sub: "åˆ›æ„å…‰ (Creative)", en: "Neon lighting", cn: "éœ“è™¹ç¯" },
                    { sub: "åˆ›æ„å…‰ (Creative)", en: "Bioluminescence", cn: "ç”Ÿç‰©è§å…‰" },
                    { sub: "åˆ›æ„å…‰ (Creative)", en: "Softbox", cn: "æŸ”å…‰ç®±" }
                ]
            },
            portrait: {
                icon: "ğŸ‘©",
                title: "äººåƒ (Portrait)",
                desc: "ä¸“æ³¨äºé¢éƒ¨ã€çš®è‚¤å’Œç¥æ€ã€‚æ‹’ç»â€˜èœ¡åƒæ„Ÿâ€™ã€‚",
                tip: "åŠ å…¥ 'Skin pores' (æ¯›å­”) å’Œ 'Subsurface scattering' (æ¬¡è¡¨é¢æ•£å°„) æå…¶é‡è¦ã€‚",
                keywords: [
                    { sub: "çš®è‚¤ (Skin)", en: "Detailed skin texture", cn: "çœŸå®çš®è‚¤çº¹ç†" },
                    { sub: "çš®è‚¤ (Skin)", en: "Skin pores", cn: "æ¯›å­”ç»†èŠ‚" },
                    { sub: "çš®è‚¤ (Skin)", en: "Subsurface scattering", cn: "çš®è‚¤é€šé€æ„Ÿ" },
                    { sub: "çš®è‚¤ (Skin)", en: "Goosebumps", cn: "é¸¡çš®ç–™ç˜©(è¶…ç»†)" },
                    { sub: "äº”å®˜ (Features)", en: "Detailed eyes", cn: "ç»†èŠ‚çœ¼ç›" },
                    { sub: "äº”å®˜ (Features)", en: "Glossy lips", cn: "å…‰æ³½å˜´å”‡" },
                    { sub: "äº”å®˜ (Features)", en: "Freckles", cn: "é›€æ–‘" },
                    { sub: "äº”å®˜ (Features)", en: "Mole", cn: "æ³ªç—£" },
                    { sub: "å‘å‹ (Hair)", en: "Messy hair", cn: "å‡Œä¹±å‘ä¸" },
                    { sub: "å‘å‹ (Hair)", en: "Wet hair", cn: "æ¹¿å‘" },
                    { sub: "è¡¨æƒ… (Face)", en: "Looking at viewer", cn: "ç›´è§†é•œå¤´" },
                    { sub: "è¡¨æƒ… (Face)", en: "Seductive smile", cn: "è¯±æƒ‘å¾®ç¬‘" }
                ]
            },
            camera: {
                icon: "ğŸ“·",
                title: "æ‘„å½± (Camera)",
                desc: "æ¨¡æ‹ŸçœŸå®ç›¸æœºå‚æ•°ã€‚æ§åˆ¶æ™¯æ·±å’Œè§†è§’ã€‚",
                tip: "æ‹äººåƒç”¨ 85mmï¼Œæ‹å¤§åœºæ™¯ç”¨ Wide angleã€‚",
                keywords: [
                    { sub: "é•œå¤´ (Lens)", en: "85mm lens", cn: "85mm(äººåƒ)" },
                    { sub: "é•œå¤´ (Lens)", en: "35mm lens", cn: "35mm(äººæ–‡)" },
                    { sub: "é•œå¤´ (Lens)", en: "Wide angle", cn: "å¹¿è§’" },
                    { sub: "é•œå¤´ (Lens)", en: "Macro photography", cn: "å¾®è·" },
                    { sub: "å‚æ•° (Settings)", en: "Depth of field", cn: "æ™¯æ·±" },
                    { sub: "å‚æ•° (Settings)", en: "Bokeh", cn: "èƒŒæ™¯è™šåŒ–" },
                    { sub: "å‚æ•° (Settings)", en: "F/1.8", cn: "F1.8å¤§å…‰åœˆ" },
                    { sub: "å‚æ•° (Settings)", en: "Motion blur", cn: "è¿åŠ¨æ¨¡ç³Š" },
                    { sub: "èƒ¶ç‰‡ (Film)", en: "Kodak Portra 400", cn: "æŸ¯è¾¾èƒ¶ç‰‡é£" },
                    { sub: "èƒ¶ç‰‡ (Film)", en: "Film grain", cn: "èƒ¶ç‰‡é¢—ç²’" },
                    { sub: "èƒ¶ç‰‡ (Film)", en: "Polaroid", cn: "æ‹ç«‹å¾—" }
                ]
            },
            style: {
                icon: "ğŸ¨",
                title: "é£æ ¼ (Style)",
                desc: "å®šä¹‰ç”»é¢åŸºè°ƒã€‚åŒ…å« Y2Kã€æ‹¼è´´ç­‰æ½®æµé£æ ¼ã€‚",
                tip: "Y2K é£æ ¼è¯·é…åˆ 'Holographic' å’Œ 'Sticker art' ä½¿ç”¨ã€‚",
                keywords: [
                    { sub: "æ½®æµ (Trendy)", en: "Y2K aesthetic", cn: "åƒç¦§é£æ ¼" },
                    { sub: "æ½®æµ (Trendy)", en: "Holographic", cn: "å…¨æ¯é•­å°„" },
                    { sub: "æ½®æµ (Trendy)", en: "Collage art", cn: "æ‹¼è´´è‰ºæœ¯" },
                    { sub: "æ½®æµ (Trendy)", en: "Sticker art", cn: "è´´çº¸è‰ºæœ¯" },
                    { sub: "æ½®æµ (Trendy)", en: "Paper cutout", cn: "å‰ªçº¸é£" },
                    { sub: "æ•°å­— (Digital)", en: "Cyberpunk", cn: "èµ›åšæœ‹å…‹" },
                    { sub: "æ•°å­— (Digital)", en: "Anime", cn: "æ—¥ç³»åŠ¨æ¼«" },
                    { sub: "æ•°å­— (Digital)", en: "3D render", cn: "3Dæ¸²æŸ“" },
                    { sub: "ä¼ ç»Ÿ (Trad)", en: "Oil painting", cn: "æ²¹ç”»" },
                    { sub: "ä¼ ç»Ÿ (Trad)", en: "Watercolor", cn: "æ°´å½©" },
                    { sub: "ä¼ ç»Ÿ (Trad)", en: "Sketch", cn: "ç´ æ" }
                ]
            },
            clothes: {
                icon: "ğŸ‘—",
                title: "æœé¥° (Clothes)",
                desc: "æè´¨çš„ç‰©ç†å±æ€§ã€‚",
                tip: "æè¿°æè´¨æ¯”æè¿°é¢œè‰²æ›´èƒ½å¢åŠ è´¨æ„Ÿã€‚",
                keywords: [
                    { sub: "é¢æ–™ (Fabric)", en: "Silk", cn: "ä¸ç»¸" },
                    { sub: "é¢æ–™ (Fabric)", en: "Lace", cn: "è•¾ä¸" },
                    { sub: "é¢æ–™ (Fabric)", en: "Latex", cn: "ä¹³èƒ¶" },
                    { sub: "é¢æ–™ (Fabric)", en: "Denim", cn: "ç‰›ä»”" },
                    { sub: "ç‰¹æ®Š (Special)", en: "Translucent", cn: "åŠé€æ˜" },
                    { sub: "ç‰¹æ®Š (Special)", en: "Metallic", cn: "é‡‘å±å…‰æ³½" },
                    { sub: "ç‰¹æ®Š (Special)", en: "Wet clothes", cn: "æ¹¿è¡£æœ" },
                    { sub: "å•å“ (Item)", en: "White shirt", cn: "ç™½è¡¬è¡«" },
                    { sub: "å•å“ (Item)", en: "Dress", cn: "è¿è¡£è£™" },
                    { sub: "å•å“ (Item)", en: "School uniform", cn: "æ ¡æœ" }
                ]
            },
            env: {
                icon: "ğŸŒ",
                title: "ç¯å¢ƒ (Env)",
                desc: "æ„å›¾ä¸åœºæ™¯ã€‚",
                tip: "è¯•è¯• 'Dutch angle' è®©ç”»é¢åŠ¨èµ·æ¥ã€‚",
                keywords: [
                    { sub: "æ„å›¾ (Comp)", en: "Rule of thirds", cn: "ä¸‰åˆ†æ³•" },
                    { sub: "æ„å›¾ (Comp)", en: "Dynamic angle", cn: "åŠ¨æ€è§’åº¦" },
                    { sub: "æ„å›¾ (Comp)", en: "Dutch angle", cn: "è·å…°è§’(å€¾æ–œ)" },
                    { sub: "æ„å›¾ (Comp)", en: "From below", cn: "ä»°è§†" },
                    { sub: "åœºæ™¯ (Place)", en: "Simple background", cn: "ç®€å•èƒŒæ™¯" },
                    { sub: "åœºæ™¯ (Place)", en: "Street", cn: "è¡—é“" },
                    { sub: "åœºæ™¯ (Place)", en: "Nature", cn: "è‡ªç„¶" },
                    { sub: "åœºæ™¯ (Place)", en: "Bedroom", cn: "å§å®¤" },
                    { sub: "åœºæ™¯ (Place)", en: "Cyberpunk city", cn: "èµ›åšåŸå¸‚" }
                ]
            },
            negative: {
                icon: "ğŸš«",
                title: "è´Ÿé¢ (Negative)",
                desc: "ä½ ä¸å¸Œæœ›çœ‹åˆ°çš„ä¸œè¥¿ã€‚",
                tip: "è¿™æ˜¯ç”»è´¨çš„â€˜å®ˆé—¨å‘˜â€™ã€‚",
                keywords: [
                    { sub: "é€šç”¨ (General)", en: "Worst quality", cn: "æœ€å·®è´¨é‡" },
                    { sub: "é€šç”¨ (General)", en: "Low quality", cn: "ä½è´¨é‡" },
                    { sub: "é€šç”¨ (General)", en: "Normal quality", cn: "æ™®é€šè´¨é‡" },
                    { sub: "é€šç”¨ (General)", en: "Lowres", cn: "ä½åˆ†è¾¨ç‡" },
                    { sub: "äººä½“ (Body)", en: "Bad anatomy", cn: "ç»“æ„é”™è¯¯" },
                    { sub: "äººä½“ (Body)", en: "Bad hands", cn: "åæ‰‹" },
                    { sub: "äººä½“ (Body)", en: "Missing fingers", cn: "ç¼ºæ‰‹æŒ‡" },
                    { sub: "å…¶ä»– (Other)", en: "Watermark", cn: "æ°´å°" },
                    { sub: "å…¶ä»– (Other)", en: "Text", cn: "æ–‡å­—" }
                ]
            }
        };

        // State
        let currentCategory = 'quality';
        let selectedPrompts = [];

        // Elements
        const desktopNav = document.getElementById('desktop-nav-container');
        const mobileNav = document.getElementById('mobile-nav-container');
        const keywordsContainer = document.getElementById('keywords-container');
        const activeIcon = document.getElementById('active-cat-icon');
        const activeTitle = document.getElementById('active-cat-title');
        const activeDesc = document.getElementById('active-cat-desc');
        const activeTip = document.getElementById('active-cat-tip');
        const promptDisplay = document.getElementById('prompt-display');

        // Init
        function init() {
            renderNav();
            renderCategory('quality');
            initMiniChart();
            updateTotalCount();
        }

        function updateTotalCount() {
            let total = 0;
            Object.values(promptData).forEach(cat => total += cat.keywords.length);
            document.getElementById('total-count').innerText = total + '+';
        }

        // --- Navigation Rendering (Dual System) ---
        function renderNav() {
            // Desktop Nav (Vertical List)
            desktopNav.innerHTML = '';
            Object.keys(promptData).forEach(key => {
                const cat = promptData[key];
                const isActive = key === currentCategory;
                const btn = document.createElement('button');
                btn.className = `w-full text-left px-4 py-3 rounded-lg flex items-center justify-between transition group ${
                    isActive ? 'nav-btn-active' : 'bg-transparent hover:bg-gray-50 text-gray-600'
                }`;
                btn.onclick = () => renderCategory(key);
                btn.innerHTML = `
                    <div class="flex items-center gap-3">
                        <span class="text-xl">${cat.icon}</span>
                        <span class="font-bold text-sm">${cat.title.split('(')[0]}</span>
                    </div>
                `;
                desktopNav.appendChild(btn);
            });

            // Mobile Nav (Horizontal Tabs)
            mobileNav.innerHTML = '';
            Object.keys(promptData).forEach(key => {
                const cat = promptData[key];
                const isActive = key === currentCategory;
                const btn = document.createElement('button');
                btn.className = `px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition border ${
                    isActive 
                    ? 'bg-[#8B7355] text-white border-[#8B7355] shadow-sm' 
                    : 'bg-white text-gray-600 border-gray-200 hover:border-[#Cfb898]'
                }`;
                btn.onclick = () => {
                    renderCategory(key);
                    // Mobile auto scroll to selection
                    btn.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                };
                btn.innerHTML = `${cat.icon} ${cat.title.split('(')[0]}`;
                mobileNav.appendChild(btn);
            });
        }

        // --- Category Rendering ---
        function renderCategory(key) {
            currentCategory = key;
            
            // Re-render navs to update visual active state
            Array.from(desktopNav.children).forEach((btn, idx) => {
                const isMatch = Object.keys(promptData)[idx] === key;
                btn.className = `w-full text-left px-4 py-3 rounded-lg flex items-center justify-between transition group ${
                    isMatch ? 'nav-btn-active' : 'bg-transparent hover:bg-gray-50 text-gray-600'
                }`;
            });
            Array.from(mobileNav.children).forEach((btn, idx) => {
                const isMatch = Object.keys(promptData)[idx] === key;
                btn.className = `px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition border ${
                    isMatch 
                    ? 'bg-[#8B7355] text-white border-[#8B7355] shadow-sm' 
                    : 'bg-white text-gray-600 border-gray-200 hover:border-[#Cfb898]'
                }`;
            });

            const data = promptData[key];
            
            // Update Header (with simple fade effect)
            const contentArea = document.getElementById('content-area');
            // contentArea.classList.add('opacity-50'); // Optional: Too flashy if strict
            
            activeIcon.innerText = data.icon;
            activeTitle.innerText = data.title;
            activeDesc.innerText = data.desc;
            activeTip.innerText = data.tip;

            // Grouping logic
            const grouped = {};
            data.keywords.forEach(item => {
                if (!grouped[item.sub]) grouped[item.sub] = [];
                grouped[item.sub].push(item);
            });

            // Clear & Render Grid
            keywordsContainer.innerHTML = '';
            
            Object.keys(grouped).forEach((subCat, index) => {
                const groupSection = document.createElement('div');
                groupSection.className = "bg-white p-5 rounded-xl border border-gray-100 shadow-sm transition hover:shadow-md";
                // Animation delay for cascading effect
                groupSection.style.animation = `fadeIn 0.3s ease-out ${index * 0.05}s forwards`;
                groupSection.style.opacity = '0'; // Start hidden for animation

                // Subheader
                const headerDiv = document.createElement('div');
                headerDiv.className = "mb-4 pb-2 border-b border-gray-100 flex items-center";
                headerDiv.innerHTML = `<span class="text-xs font-bold text-[#8B7355] uppercase tracking-widest bg-[#FDFBF7] px-2 py-1 rounded">${subCat}</span>`;
                groupSection.appendChild(headerDiv);

                // Grid
                const grid = document.createElement('div');
                grid.className = "grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-3";

                grouped[subCat].forEach(item => {
                    const chip = document.createElement('button');
                    chip.className = "keyword-chip w-full text-left bg-gray-50 p-2.5 rounded-lg group relative overflow-hidden";
                    chip.onclick = () => addToPrompt(item.en);
                    chip.innerHTML = `
                        <div class="font-bold text-gray-800 text-sm mb-0.5 pr-4 truncate">${item.en}</div>
                        <div class="text-xs text-gray-500 truncate">${item.cn}</div>
                        <div class="absolute top-1 right-1 w-2 h-2 rounded-full bg-[#Cfb898] opacity-0 group-hover:opacity-100 transition"></div>
                    `;
                    grid.appendChild(chip);
                });

                groupSection.appendChild(grid);
                keywordsContainer.appendChild(groupSection);
            });
            
            // CSS Animation for fade in
            const styleSheet = document.createElement("style");
            styleSheet.innerText = `
                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(10px); }
                    to { opacity: 1; transform: translateY(0); }
                }
            `;
            document.head.appendChild(styleSheet);
        }

        // --- Prompt Builder Logic ---
        function addToPrompt(text) {
            if (!selectedPrompts.includes(text)) {
                selectedPrompts.push(text);
                updatePromptDisplay();
            } else {
                // Highlight existing
                const chips = document.querySelectorAll('#prompt-display span');
                chips.forEach(chip => {
                    if (chip.innerText.includes(text)) {
                        chip.classList.add('ring-2', 'ring-red-400', 'bg-red-50');
                        setTimeout(() => chip.classList.remove('ring-2', 'ring-red-400', 'bg-red-50'), 400);
                    }
                });
            }
        }

        function updatePromptDisplay() {
            if (selectedPrompts.length === 0) {
                promptDisplay.innerHTML = '<span class="text-gray-400 italic select-none flex items-center h-full">ğŸ‘‡ ç‚¹å‡»ä¸‹æ–¹è¯æ±‡ï¼Œæ­¤å¤„è‡ªåŠ¨ç»„è£…å’’è¯­...</span>';
                return;
            }
            
            promptDisplay.innerHTML = selectedPrompts.map((p, index) => `
                <span class="inline-flex items-center bg-white border border-gray-200 shadow-sm text-gray-800 px-2 py-1.5 rounded-md text-sm m-1 transition hover:border-red-300 group cursor-default">
                    ${p}
                    <button onclick="removePrompt(${index})" class="ml-2 text-gray-300 hover:text-red-500 focus:outline-none transition">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor">
                          <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                        </svg>
                    </button>
                </span>
            `).join('');
            
            // Auto scroll to bottom
            promptDisplay.scrollTop = promptDisplay.scrollHeight;
        }

        function removePrompt(index) {
            selectedPrompts.splice(index, 1);
            updatePromptDisplay();
        }

        function clearPrompts() {
            selectedPrompts = [];
            updatePromptDisplay();
        }

        function copyPrompts() {
            if (selectedPrompts.length === 0) return;
            const fullString = selectedPrompts.join(', ');
            navigator.clipboard.writeText(fullString).then(() => {
                const btn = document.querySelector('button[onclick="copyPrompts()"] span');
                const originalText = btn.innerText;
                btn.innerText = "âœ… å·²å¤åˆ¶!";
                setTimeout(() => btn.innerText = originalText, 2000);
            });
        }

        // --- Chart ---
        function initMiniChart() {
            const ctx = document.getElementById('miniChart').getContext('2d');
            new Chart(ctx, {
                type: 'polarArea',
                data: {
                    labels: ['Quality', 'Light', 'Subject', 'Style', 'Camera'],
                    datasets: [{
                        data: [9, 7, 10, 6, 5],
                        backgroundColor: [
                            'rgba(139, 115, 85, 0.7)',
                            'rgba(207, 184, 152, 0.7)',
                            'rgba(74, 74, 74, 0.7)',
                            'rgba(212, 196, 183, 0.7)',
                            'rgba(229, 224, 216, 0.7)'
                        ],
                        borderWidth: 1,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: { ticks: { display: false }, grid: { display: false } } // Hide ugly grid lines
                    },
                    plugins: {
                        legend: { display: false, position: 'bottom' }
                    }
                }
            });
        }

        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
